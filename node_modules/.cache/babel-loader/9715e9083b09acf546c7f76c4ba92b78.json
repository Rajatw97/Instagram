{"ast":null,"code":"var _jsxFileName = \"D:\\\\React\\\\insta-clone\\\\src\\\\components\\\\Userprofile.js\";\nimport { Button, Badge } from '@material-ui/core';\nimport React, { useEffect } from 'react';\nimport history from '../History';\nimport '../css/Userprofile.css';\nimport { connect } from 'react-redux';\nimport { userprofileAction, userAction, userimgAction } from '../actions';\nimport { db, auth, storage } from '../firebaseConfig';\nimport { Avatar } from '@material-ui/core';\n\nconst Userprofile = props => {\n  useEffect(() => {\n    auth.onAuthStateChanged(authUser => {\n      if (authUser) {\n        console.log(authUser);\n        props.userAction(authUser);\n      } else {\n        props.userAction(null);\n      }\n    });\n\n    if (props.users.user) {\n      db.collection('users').doc(props.users.user.uid).onSnapshot(snapshot => {\n        //    console.log(snapshot.data())\n        props.userprofileAction(snapshot.data());\n      });\n    }\n  }, [props.users.user]);\n  const hiddenFileInput = React.useRef(null);\n\n  const handleChange = e => {\n    if (e.target.files[0]) {\n      console.log(\"change\" + e.target.files[0]);\n      props.userimgAction(e.target.files[0]);\n    }\n  };\n\n  const imgUpld = e => {\n    hiddenFileInput.current.click();\n    console.log(\"userimg: \", props.users.userimg);\n\n    if (props.users.userimg) {\n      console.log(\"inside if\");\n      const uploadTask = storage.ref(`images/${props.users.user.uid}`).put(props.users.userimg);\n      uploadTask.on('state_changed', () => {\n        storage.ref(\"/images\").child(props.users.user.uid).getDownloadURL().then(url => {\n          db.collection(\"users\").doc(props.users.user.uid).update({\n            imageUrl: url\n          });\n        });\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"back_btn\",\n    style: {\n      marginTop: '-45px'\n    },\n    type: \"submit\",\n    onClick: () => history.push(\"/\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 8\n    }\n  }, \"Back\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user_info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user_img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    alt: \"Remy Sharp\",\n    src: props.users.userprofile.imageUrl,\n    sizes: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"iuitem\",\n    id: \"file\",\n    type: \"file\",\n    ref: hiddenFileInput,\n    onChange: handleChange,\n    style: {\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"fas fa-user-edit edit_icon\",\n    onClick: imgUpld,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"img_uname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, \"Rajat\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user_follow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user_bio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 14\n    }\n  }, props.users.userprofile.bio), \" : \", props.users.userprofile.followers, \" : \", props.users.userprofile.following)));\n};\n\nconst mapStateToProps = state => {\n  return {\n    users: state\n  };\n};\n\nexport default connect(mapStateToProps, {\n  userprofileAction,\n  userAction,\n  userimgAction\n})(Userprofile);","map":{"version":3,"sources":["D:/React/insta-clone/src/components/Userprofile.js"],"names":["Button","Badge","React","useEffect","history","connect","userprofileAction","userAction","userimgAction","db","auth","storage","Avatar","Userprofile","props","onAuthStateChanged","authUser","console","log","users","user","collection","doc","uid","onSnapshot","snapshot","data","hiddenFileInput","useRef","handleChange","e","target","files","imgUpld","current","click","userimg","uploadTask","ref","put","on","child","getDownloadURL","then","url","update","imageUrl","marginTop","push","userprofile","display","bio","followers","following","mapStateToProps","state"],"mappings":";AAAA,SAASA,MAAT,EAAgBC,KAAhB,QAA6B,mBAA7B;AACA,OAAOC,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAO,wBAAP;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,iBAAR,EAA0BC,UAA1B,EAAqCC,aAArC,QAAyD,YAAzD;AACA,SAAQC,EAAR,EAAWC,IAAX,EAAgBC,OAAhB,QAA8B,mBAA9B;AACA,SAAQC,MAAR,QAAqB,mBAArB;;AAEA,MAAMC,WAAW,GAAEC,KAAD,IAAS;AAEzBX,EAAAA,SAAS,CAAC,MAAI;AAEPO,IAAAA,IAAI,CAACK,kBAAL,CAAwBC,QAAQ,IAAE;AAC/B,UAAGA,QAAH,EAAY;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAF,QAAAA,KAAK,CAACP,UAAN,CAAiBS,QAAjB;AAEA,OAJF,MAKI;AACFF,QAAAA,KAAK,CAACP,UAAN,CAAiB,IAAjB;AACD;AACF,KATF;;AAUG,QAAGO,KAAK,CAACK,KAAN,CAAYC,IAAf,EAAoB;AACpBX,MAAAA,EAAE,CAACY,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BR,KAAK,CAACK,KAAN,CAAYC,IAAZ,CAAiBG,GAA5C,EAAiDC,UAAjD,CAA4DC,QAAQ,IAAE;AACtE;AACKX,QAAAA,KAAK,CAACR,iBAAN,CAAwBmB,QAAQ,CAACC,IAAT,EAAxB;AACO,OAHZ;AAIS;AAER,GAnBF,EAmBG,CAACZ,KAAK,CAACK,KAAN,CAAYC,IAAb,CAnBH,CAAT;AAqBU,QAAMO,eAAe,GAAGzB,KAAK,CAAC0B,MAAN,CAAa,IAAb,CAAxB;;AAEA,QAAMC,YAAY,GAACC,CAAC,IAAE;AACpB,QAAGA,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAH,EAAqB;AACnBf,MAAAA,OAAO,CAACC,GAAR,CAAY,WAASY,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAArB;AACAlB,MAAAA,KAAK,CAACN,aAAN,CAAoBsB,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAApB;AACD;AAEJ,GANC;;AAOA,QAAMC,OAAO,GAAEH,CAAC,IAAE;AAChBH,IAAAA,eAAe,CAACO,OAAhB,CAAwBC,KAAxB;AACAlB,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBJ,KAAK,CAACK,KAAN,CAAYiB,OAApC;;AACA,QAAGtB,KAAK,CAACK,KAAN,CAAYiB,OAAf,EAAuB;AACrBnB,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACA,YAAMmB,UAAU,GAAE1B,OAAO,CAAC2B,GAAR,CAAa,UAASxB,KAAK,CAACK,KAAN,CAAYC,IAAZ,CAAiBG,GAAI,EAA3C,EAA8CgB,GAA9C,CAAkDzB,KAAK,CAACK,KAAN,CAAYiB,OAA9D,CAAlB;AACAC,MAAAA,UAAU,CAACG,EAAX,CAAc,eAAd,EACA,MAAI;AACJ7B,QAAAA,OAAO,CACN2B,GADD,CACK,SADL,EAECG,KAFD,CAEO3B,KAAK,CAACK,KAAN,CAAYC,IAAZ,CAAiBG,GAFxB,EAGCmB,cAHD,GAICC,IAJD,CAIMC,GAAG,IAAE;AACPnC,UAAAA,EAAE,CAACY,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BR,KAAK,CAACK,KAAN,CAAYC,IAAZ,CAAiBG,GAA5C,EAAiDsB,MAAjD,CACA;AACDC,YAAAA,QAAQ,EAACF;AADR,WADA;AAIC,SATL;AAUH,OAZG;AAaH;AAEJ,GArBG;;AAwBR,sBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACJ,oBAAC,MAAD;AAAS,IAAA,SAAS,EAAC,UAAnB;AAA8B,IAAA,KAAK,EAAE;AAACG,MAAAA,SAAS,EAAC;AAAX,KAArC;AAA0D,IAAA,IAAI,EAAC,QAA/D;AAAwE,IAAA,OAAO,EAAE,MAAI3C,OAAO,CAAC4C,IAAR,CAAa,GAAb,CAArF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADI,eAEJ;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIC,oBAAC,MAAD;AAAQ,IAAA,GAAG,EAAC,YAAZ;AAA0B,IAAA,GAAG,EAAElC,KAAK,CAACK,KAAN,CAAY8B,WAAZ,CAAwBH,QAAvD;AAAiE,IAAA,KAAK,EAAC,OAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJD,eAKA;AAAO,IAAA,SAAS,EAAC,QAAjB;AAA0B,IAAA,EAAE,EAAC,MAA7B;AAAoC,IAAA,IAAI,EAAC,MAAzC;AAAiD,IAAA,GAAG,EAAEnB,eAAtD;AAAuE,IAAA,QAAQ,EAAEE,YAAjF;AAA+F,IAAA,KAAK,EAAE;AAACqB,MAAAA,OAAO,EAAC;AAAT,KAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALA,eAMA;AAAQ,IAAA,SAAS,EAAC,4BAAlB;AAA+C,IAAA,OAAO,EAAEjB,OAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANA,eAOC;AAAG,IAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAPD,CADJ,eAUI;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,eAaI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAbJ,eAkBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASnB,KAAK,CAACK,KAAN,CAAY8B,WAAZ,CAAwBE,GAAjC,CAAL,SAAuDrC,KAAK,CAACK,KAAN,CAAY8B,WAAZ,CAAwBG,SAA/E,SAA6FtC,KAAK,CAACK,KAAN,CAAY8B,WAAZ,CAAwBI,SAArH,CAlBD,CAFI,CAAP;AAuBH,CA/ED;;AAiFA,MAAMC,eAAe,GAAEC,KAAD,IAAS;AAC3B,SAAO;AAACpC,IAAAA,KAAK,EAACoC;AAAP,GAAP;AACH,CAFD;;AAIA,eAAelD,OAAO,CAACiD,eAAD,EAAiB;AAAChD,EAAAA,iBAAD;AAAmBC,EAAAA,UAAnB;AAA8BC,EAAAA;AAA9B,CAAjB,CAAP,CAAuEK,WAAvE,CAAf","sourcesContent":["import { Button,Badge } from '@material-ui/core';\r\nimport React,{useEffect} from 'react';\r\nimport history from '../History';\r\nimport '../css/Userprofile.css';\r\nimport {connect} from 'react-redux';\r\nimport {userprofileAction,userAction,userimgAction} from '../actions';\r\nimport {db,auth,storage} from '../firebaseConfig';\r\nimport {Avatar} from '@material-ui/core';\r\n\r\nconst Userprofile=(props)=>{\r\n\r\n  useEffect(()=>{\r\n\r\n         auth.onAuthStateChanged(authUser=>{\r\n            if(authUser){\r\n              console.log(authUser);\r\n              props.userAction(authUser);\r\n\r\n             }\r\n            else{\r\n              props.userAction(null);\r\n            }\r\n          })\r\n            if(props.users.user){\r\n            db.collection('users').doc(props.users.user.uid).onSnapshot(snapshot=>{\r\n            //    console.log(snapshot.data())\r\n                 props.userprofileAction(snapshot.data());\r\n                       })\r\n                    }\r\n                \r\n            },[props.users.user])\r\n\r\n            const hiddenFileInput = React.useRef(null);\r\n            \r\n            const handleChange=e=>{\r\n              if(e.target.files[0]){\r\n                console.log(\"change\"+e.target.files[0])\r\n                props.userimgAction(e.target.files[0]);\r\n              }\r\n             \r\n          };\r\n            const imgUpld= e=>{\r\n              hiddenFileInput.current.click();\r\n              console.log(\"userimg: \",props.users.userimg);\r\n              if(props.users.userimg){\r\n                console.log(\"inside if\");\r\n                const uploadTask= storage.ref(`images/${props.users.user.uid}`).put(props.users.userimg);\r\n                uploadTask.on('state_changed',\r\n                ()=>{\r\n                storage\r\n                .ref(\"/images\")\r\n                .child(props.users.user.uid)\r\n                .getDownloadURL()\r\n                .then(url=>{\r\n                    db.collection(\"users\").doc(props.users.user.uid).update(\r\n                    {\r\n                   imageUrl:url\r\n                     });\r\n                    });\r\n            });\r\n            }    \r\n\r\n        }\r\n\r\n        \r\n    return(<div>\r\n       <Button  className=\"back_btn\" style={{marginTop:'-45px'}} type=\"submit\" onClick={()=>history.push(\"/\")}>Back</Button>\r\n       <div className=\"user_info\">\r\n           <div className=\"user_img\">\r\n               \r\n            {/* username below image */}\r\n           \r\n            <Avatar alt=\"Remy Sharp\"  src={props.users.userprofile.imageUrl} sizes=\"large\" />\r\n           <input className=\"iuitem\" id=\"file\" type=\"file\"  ref={hiddenFileInput} onChange={handleChange} style={{display:\"none\"}} ></input> \r\n           <button className=\"fas fa-user-edit edit_icon\" onClick={imgUpld} ></button>\r\n            <p className=\"img_uname\">Rajat</p>\r\n           </div>\r\n           <div className=\"user_follow\">\r\n               {/* followers,following, button & no of foll */}\r\n           </div>\r\n           <div className=\"user_bio\">\r\n               {/* bio,edit bio option too */}\r\n           </div>\r\n\r\n\r\n        <div><strong>{props.users.userprofile.bio}</strong> : {props.users.userprofile.followers} : {props.users.userprofile.following}</div>\r\n        </div>\r\n        </div>);\r\n}\r\n\r\nconst mapStateToProps=(state)=>{\r\n    return {users:state}\r\n}\r\n\r\nexport default connect(mapStateToProps,{userprofileAction,userAction,userimgAction}) (Userprofile);"]},"metadata":{},"sourceType":"module"}